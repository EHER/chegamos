<?php

namespace app\models;

class PlayerProfileTest extends \PHPUnit_Framework_TestCase
{

    private $playerProfileJson = '{"pointsDay":700,"pointsWeek":701,"pointsMonth":1670,"pointsAll":33575,"level":{"name":"VIP","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4dc29c23c47eed6b7c008683\/original.png?1313015265","startPoints":10000},"nextLevel":{"name":"VIP Gold","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25ecfdc47eed21e6005578\/original.png?1313015277","startPoints":50000},"badges":[{"name":"Independ\u00eancia!","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e67753b5e6bdb61950023e6\/original.png?1315403066","message":"Salve! Salve! Voc\u00ea \u00e9 um bom brasileiro! Agora que ganhou esta medalha, vamos comemorar juntos a independ\u00eancia dessa terra adorada!","id":"4e67753b5e6bdb61950023e6"},{"name":"InfoTrends 2011","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e5e8696abb57514ab0008dd\/original.png?1314817757","message":"Parab\u00e9ns por estar participando do InfoTrends! Em tempos de muita informa\u00e7\u00e3o, o importante n\u00e3o \u00e9 saber ouvir. \u00c9 saber o que ouvir.","id":"4e5e8696abb57514ab0008dd"},{"name":"Celebridade","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f157c47eed21e3005026\/original.png?1314286523","message":"INCR\u00cdVEL!!! Voc\u00ea virou uma celebridade no Apontador! Voc\u00ea \u00e9 uma refer\u00eancia para muitas pessoas e entrou no nosso Hall da Fama!","id":"4e25f157c47eed21e3005026"},{"name":"Apontador 11 anos!","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e5837298a73614c3100d568\/original.png?1314404136","message":"Hoje \u00e9 um dia de comemora\u00e7\u00e3o e voc\u00ea faz parte desta festa!","id":"4e5837298a73614c3100d568"},{"name":"Paparazzo","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f266c47eed21e300504c\/original.png?1314286377","message":"Que SENSACIONAL, 100 fotos!!! Voc\u00ea realmente busca os melhores momentos e lugares para tirar fotos! Seus seguidores no Apontador v\u00e3o gostar de saber disso!","id":"4e25f266c47eed21e300504c"},{"name":"Fot\u00f3grafo","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f249c47eed21e6005609\/original.png?1314286399","message":"Incr\u00edvel, 40 fotos!!! Voc\u00ea j\u00e1 pensou em virar fot\u00f3grafo profissional?! Acho que temos um apaixonado por fotografia!","id":"4e25f249c47eed21e6005609"},{"name":"Turista japon\u00eas","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f225c47eed21e6005607\/original.png?1314286419","message":"Show de bola! Voc\u00ea est\u00e1 tirando mais fotos que turista japon\u00eas... j\u00e1 est\u00e1 andando com a sua c\u00e2mera pendurada no pesco\u00e7o?","id":"4e25f225c47eed21e6005607"},{"name":"Polaroid","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f205c47eed21e3005045\/original.png?1314286442","message":"Uau, voc\u00ea \u00e9 quase uma Polaroid! A esta altura voc\u00ea j\u00e1 deve estar enviando fotos instantaneamente pelo seu celular!","id":"4e25f205c47eed21e3005045"},{"name":"8 Megapixels","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f1dac47eed21e60055fc\/original.png?1314286461","message":"Muito bem, agora suas fotos s\u00e3o de alta defini\u00e7\u00e3o! Perfeito para tirar fotos das fachadas e dos seus pratos preferidos!","id":"4e25f1dac47eed21e60055fc"},{"name":"3x4","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f1b2c47eed21e60055ee\/original.png?1314286483","message":"Que legal, mais fotos! Uma imagem vale mais do que mil palavras!","id":"4e25f1b2c47eed21e60055ee"},{"name":"McDia Feliz","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e58243adbb61a53f800349d\/original.png?1314399290","message":"Fazer o bem: a gente ama muito tudo isso! Voc\u00ea est\u00e1 apoiando o combate ao c\u00e2ncer infantojuvenil participando do McDia Feliz.","id":"4e58243adbb61a53f800349d"},{"name":"Primeira Foto","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f188c47eed21e300502b\/original.png?1314286502","message":"Parab\u00e9ns, essa \u00e9 a sua primeira foto no Apontador! Envie mais fotos e mostre para seus amigos como s\u00e3o legais os lugares que voc\u00ea vai!","id":"4e25f188c47eed21e300502b"},{"name":"Guia da Cidade","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4dc2a073c47eed6b7c008687\/original.png?1314286850","message":"INCR\u00cdVEL!!! Voc\u00ea \u00e9 o nosso Guia da Cidade e conhece lugares como ningu\u00e9m! Queremos fazer um tour com voc\u00ea!","id":"4dc2a073c47eed6b7c008687"},{"name":"Explorador","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4dc2a0ddc47eed6b8500985d\/original.png?1314286835","message":"Todos de p\u00e9, palmas para o nosso Explorador!!! Indiana Jones ficaria com inveja de voc\u00ea!","id":"4dc2a0ddc47eed6b8500985d"},{"name":"Aventureiro","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4dd3f5f7c47eed2fbd0000d8\/original.png?1314286768","message":"Uau! Voc\u00ea \u00e9 um verdadeiro aventureiro e esteve em 20 lugares diferentes! Conte o que achou destes locais escrevendo avalia\u00e7\u00f5es no Apontador!","id":"4dd3f5f7c47eed2fbd0000d8"},{"name":"Descobridor","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4dd3f644c47eed2fc2000113\/original.png?1314286745","message":"Que legal Descobridor! Aproveite e tire uma foto do local e envie atrav\u00e9s do seu celular, elas tamb\u00e9m te d\u00e3o medalhas!","id":"4dd3f644c47eed2fc2000113"},{"name":"Curioso","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e151eadc47eed6684000094\/original.png?1314286697","message":"Olha s\u00f3, sua curiosidade por lugares diferentes te levou a fazer o seu oitavo checkin no Apontador! Continue assim!","id":"4e151eadc47eed6684000094"},{"name":"Visitante","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e151fb4c47eed667f000092\/original.png?1314286681","message":"Tr\u00eas checkins! Que legal! Continue usando o Apontador para visitar os lugares!","id":"4e151fb4c47eed667f000092"},{"name":"Primeiro Checkin","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e151ffbc47eed667f000095\/original.png?1314286660","message":"Parab\u00e9ns pelo seu checkin! Continue utilizando o Apontador para dizer aos seus amigos onde voc\u00ea est\u00e1, quem sabe eles n\u00e3o te encontram l\u00e1?!","id":"4e151ffbc47eed667f000095"},{"name":"Escritor","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f3bfc47eed21e600563e\/original.png?1314286250","message":"SENSACIONAL, 40 avalia\u00e7\u00f5es! Voc\u00ea j\u00e1 \u00e9 um escritor de sucesso no Apontador e estamos muito orgulhosos de voc\u00ea!","id":"4e25f3bfc47eed21e600563e"},{"name":"Colunista","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f399c47eed21e6005636\/original.png?1314286270","message":"NOOOOOOSSSA! Voc\u00ea j\u00e1 fez 20 avalia\u00e7\u00f5es no Apontador! Voc\u00ea \u00e9 uma pessoa que gosta de expressar sua opini\u00e3o e a gente gosta muito disso!","id":"4e25f399c47eed21e6005636"},{"name":"Blogueiro","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f358c47eed21e6005632\/original.png?1314286288","message":"UAU, 13 avalia\u00e7\u00f5es! Voc\u00ea j\u00e1 \u00e9 reconhecido como um blogueiro! J\u00e1 convidou seus amigos para te seguirem no Apontador?!","id":"4e25f358c47eed21e6005632"},{"name":"Avaliador","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f332c47eed21e3005061\/original.png?1314286308","message":"Mandou muito bem! Voc\u00ea j\u00e1 escreveu 8 avalia\u00e7\u00f5es! J\u00e1 parou para pensar que voc\u00ea est\u00e1 ajudando milh\u00f5es de pessoas que l\u00eaem suas avalia\u00e7\u00f5es no Apontador?!","id":"4e25f332c47eed21e3005061"},{"name":"Avaliador Jr.","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f309c47eed21e6005626\/original.png?1314286333","message":"Meus Parab\u00e9ns, 3 avalia\u00e7\u00f5es! J\u00e1 escreveu sobre os seus bares e restaurantes favoritos?","id":"4e25f309c47eed21e6005626"},{"name":"Primeira Avalia\u00e7\u00e3o","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f2b6c47eed21e3005052\/original.png?1314286354","message":"Parab\u00e9ns pela sua primeira avalia\u00e7\u00e3o! Que tal compartilhar mais alguma experi\u00eancia com a comunidade Apontador?","id":"4e25f2b6c47eed21e3005052"},{"name":"Famoso","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f12ac47eed21e300501d\/original.png?1314286539","message":"DEMAIS, 40 seguidores! E n\u00e3o \u00e9 que voc\u00ea est\u00e1 ficando famoso por aqui? Amplie sua fama escrevendo mais avalia\u00e7\u00f5es, enviando fotos e fazendo checkins nos seus lugares preferidos!","id":"4e25f12ac47eed21e300501d"},{"name":"Popular","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f104c47eed21e60055dc\/original.png?1314286558","message":"Uau, voc\u00ea j\u00e1 tem 20 seguidores! Voc\u00ea deve ter muitos amigos ou estar escrevendo avalia\u00e7\u00f5es \u00f3timas! Continue assim, Senhor Popular!","id":"4e25f104c47eed21e60055dc"},{"name":"Da Galera","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f0dbc47eed21e60055d7\/original.png?1314286573","message":"Haha!!! Isto est\u00e1 ficando divertido! Voc\u00ea tem 13 seguidores e agora j\u00e1 \u00e9 da galera!","id":"4e25f0dbc47eed21e60055d7"},{"name":"Conhecido","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25f0b1c47eed21e60055d0\/original.png?1314286589","message":"Muito bem, 8 seguidores!!! Agora \u00e9 caprichar nas avalia\u00e7\u00f5es para n\u00e3o fazer feio na frente deles, certo?!","id":"4e25f0b1c47eed21e60055d0"},{"name":"Amig\u00e1vel","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25efb2c47eed21e3005006\/original.png?1314286605","message":"Opa! Um novo seguidor: agora j\u00e1 s\u00e3o 3! Voc\u00ea est\u00e1 quase ficando conhecido!","id":"4e25efb2c47eed21e3005006"},{"name":"Primeiro Seguidor","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e25eef5c47eed21e3004fdd\/original.png?1314286634","message":"Parab\u00e9ns!!! Voc\u00ea tem seu primeiro seguidor! Clique no perfil para saber quem \u00e9...","id":"4e25eef5c47eed21e3004fdd"},{"name":"Elegante","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e53f3f6636c94244f01a187\/original.png?1314124789","message":"Que foto elegante! Assim ficou bem melhor. Al\u00e9m de deixar seu perfil mais bonito, sua foto dar\u00e1 ainda mais credibilidade para suas avalia\u00e7\u00f5es!","id":"4e53f3f6636c94244f01a187"},{"name":"Bem-vindo","image":"http:\/\/s3.amazonaws.com\/badgeville-production-reward-definitions\/images\/4e53f529abb575319e017c88\/original.png?1314359042","message":"Seja bem-vindo \u00e0 comunidade Apontador! Comece j\u00e1 a avaliar seus lugares favoritos para acumular pontos e colecionar medalhas!","id":"4e53f529abb575319e017c88"}]}';
    
    public function testPopulatePlayerProfile()
    {
        $jsonObject = json_decode($this->playerProfileJson);
        $playerProfile = new PlayerProfile($jsonObject);
        $badges = $playerProfile->getBadges();
        $this->assertEquals(700, $playerProfile->getPointsDay());
        $this->assertEquals(701, $playerProfile->getPointsWeek());
        $this->assertEquals(1670, $playerProfile->getPointsMonth());
        $this->assertEquals(33575, $playerProfile->getPointsAll());
        $this->assertEquals("VIP", $playerProfile->getLevel()->getName());
        $this->assertEquals(
                "http://s3.amazonaws.com/badgeville-production-reward-definitions/images/4dc29c23c47eed6b7c008683/original.png?1313015265", 
                $playerProfile->getLevel()->getImage()
                );
        $this->assertEquals(10000, $playerProfile->getLevel()->getStartPoints());
        $this->assertEquals("VIP Gold", $playerProfile->getNextLevel()->getName());
        $this->assertEquals(
                "http://s3.amazonaws.com/badgeville-production-reward-definitions/images/4e25ecfdc47eed21e6005578/original.png?1313015277", 
                $playerProfile->getNextLevel()->getImage()
                );
        $this->assertEquals(50000, $playerProfile->getNextLevel()->getStartPoints());
        $this->assertEquals("Independência!", $badges[0]->getName());
        $this->assertEquals(
                "http://s3.amazonaws.com/badgeville-production-reward-definitions/images/4e67753b5e6bdb61950023e6/original.png?1315403066", 
                $badges[0]->getImage()
                );
        $this->assertEquals(
                "Salve! Salve! Você é um bom brasileiro! Agora que ganhou esta medalha, vamos comemorar juntos a independência dessa terra adorada!",
                $badges[0]->getMessage()
                );
        $this->assertEquals("4e67753b5e6bdb61950023e6", $badges[0]->getId());
        $this->assertEquals("Apontador 11 anos!", $badges[3]->getName());
        $this->assertEquals(
                "http://s3.amazonaws.com/badgeville-production-reward-definitions/images/4e5837298a73614c3100d568/original.png?1314404136", 
                $badges[3]->getImage()
                );
        $this->assertEquals(
                "Hoje é um dia de comemoração e você faz parte desta festa!",
                $badges[3]->getMessage()
                );
        $this->assertEquals("4e5837298a73614c3100d568", $badges[3]->getId());
        $this->assertEquals("Bem-vindo", $badges[32]->getName());
        $this->assertEquals(
                "http://s3.amazonaws.com/badgeville-production-reward-definitions/images/4e53f529abb575319e017c88/original.png?1314359042", 
                $badges[32]->getImage()
                );
        $this->assertEquals(
                "Seja bem-vindo à comunidade Apontador! Comece já a avaliar seus lugares favoritos para acumular pontos e colecionar medalhas!",
                $badges[32]->getMessage()
                );
        $this->assertEquals("4e53f529abb575319e017c88", $badges[32]->getId());
    }

}

